import{e as re,R as H,a as rt,r as st}from"../styled-components.browser.esm.f92a9794.js";import{_ as A,f as ot,K as R,c as it,B as at,q as ct,a as dt,M as ut,t as Et,F as _t,b as lt,d as mt,r as Tt,R as pt}from"../preload-helper.070d40e7.js";import{i as ht,a as pe}from"../isNil.3d926206.js";import{p as Pe}from"../index.71ea8908.js";import{d as wt,I as ft}from"../index.7daa47bc.js";import{e as ie,f as St,g as gt,j as Nt,h as It}from"../index.be5f128d.js";import{S as yt}from"../index.8da42104.js";import{a as z,l as he,t as Pt}from"../setup-react-intl.5037b415.js";import{f as Ct,i as Ot}from"../insights.063615ae.js";import{i as I,r as M,d as vt}from"../fetch.74022fd8.js";import{h as Ce}from"../moment.5b964101.js";import{a as we}from"../Redirect.57430a6e.js";import"../_baseIsEqual.f6bdc817.html";import"../_MapCache.73dd8342.html";import"../isObject.c70885d8.html";import"../config.dcd057e4.html";import"../inheritsLoose.a8857277.html";import"../index.cae3477b.html";function bt(e,n){for(var t=0;t<n.length;t++){const r=n[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}class Rt{constructor(){this.events={}}subscribe(n,t){!n||!t||(this.events[n]||(this.events[n]=[]),this.events[n].push(t))}publish(n,t){!this.events[n]||this.events[n].length<1||this.events[n].forEach(r=>{r(t||{})})}unsubscribeAll(){this.events={}}}const S=new Rt,At=e=>{const n=(o,c,E)=>{typeof window.fbq=="function"&&(o==null||o.forEach(m=>{(m.product_id&&m.product_id===c||!m.product_id)&&E(m)}))},t=o=>{const{currentSite:{facebook_pixel_codes:c},currentProductId:E}=o.siteContext;n(c,E,m=>{window.fbq("trackSingle",m.pixel_code,"CompleteRegistration")})},r=o=>{const{currentSite:{facebook_pixel_codes:c}}=o.siteContext,E=o.transaction;n(c,E.product_id,m=>{window.fbq("trackSingle",m.pixel_code,"Purchase",{currency:E.amount.currency,value:E.amount.cents/100,content_name:E.product_sku,num_items:1,content_type:"product",content_ids:E.product_id})})},s=o=>{const{currentSite:{facebook_pixel_codes:c},currentProductId:E}=o.siteContext;n(c,E,m=>{window.fbq("trackSingleCustom",m.pixel_code,"InitiateCheckout")})},i=o=>{const{currentSite:{facebook_pixel_codes:c}}=o.siteContext;typeof window.fbq=="function"&&c&&Array.isArray(c)&&c.forEach(E=>{window.fbq("init",E.pixel_code),window.fbq("track","PageView")})};(()=>{S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_REGISTRATION,t),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,r),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,r),S.subscribe("site_checkout_page_open",s),S.subscribe(e.EVENTS.EVENT_SITE_PAGE_VIEW,i)})()},Vt=e=>{const n=a=>{const{eventName:o,eventProps:c}=a.siteContext,E=o.split("_")[0],m=o.replace(E+"_",""),h=typeof c.label>"u"?null:c.label;window.ga("send","event",E,m,h),window.ga("site.send","event",E,m,h)},t=a=>{const{currentSite:{adwords_pixel_codes:o}}=a.siteContext,c=a.transaction;o==null||o.forEach(E=>{(E.product_id===c.product_id||!E.product_id)&&(new Image().src="https://www.googleadservices.com/pagead/conversion/"+E.pixel_id+"/?value="+c.amount.cents/100+"&currency_code=USD&label="+E.pixel_label+"&amp;guid=ON&amp;script=0")})},r=a=>{const{transaction:o}=a;window.ga("require","ecommerce","../index.html"),window.ga("ecommerce:addTransaction",{id:o.id,revenue:o.amount.format}),window.ga("ecommerce:addItem",{id:o.id,name:o.product_name,sku:o.product_sku,category:o.gateway_provider,price:o.amount.format,quantity:o.units}),window.ga("set","dimension3","checkout"),window.ga("set","dimension4",o.purchase_type),window.ga("ecommerce:send"),window.ga("site.require","ecommerce","../index.html"),window.ga("site.ecommerce:addTransaction",{id:o.id,revenue:o.amount.format}),window.ga("site.ecommerce:addItem",{id:o.id,name:o.product_name,sku:o.product_sku,category:o.gateway_provider,price:o.amount.format,quantity:o.units}),window.ga("site.ecommerce:send")},s=a=>{r(a),t(a)};(()=>{!window.ga||Object.entries(e.EVENTS).forEach(a=>{a[1]===e.EVENTS.EVENT_AUTHENTICATION_CONVERSION?S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,s):a[1]===e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED?S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,s):S.subscribe(a[1],n)})})()},Dt="#watch-player .embed iframe",Ut=e=>{var s;const t=(((s=document.querySelector(Dt))==null?void 0:s.getAttribute("src"))||"").replace(/&amp;/g,"&");return new URLSearchParams(t).get(e)},kt=e=>{const n=document.getElementsByTagName("meta");for(let t=0;t<n.length;t++)if(n[t].getAttribute("name")===e)return n[t].getAttribute("content");return""},xt=(e,n)=>{const t=n.EVENTS;switch(e){case t.EVENT_SALE_INITIATED:return t.EVENT_AUTHENTICATION_SIGNUP_VIEW;case t.EVENT_SALE_COMPLETE:return t.EVENT_AUTHENTICATION_CONVERSION;case t.EVENT_AUTHENTICATION_LOGIN:return t.EVENT_AUTHENTICATION_SIGNIN_VIEW;case t.EVENT_SITE_WATCHLIST_ADD:return t.EVENT_SITE_WATCHLIST_ADD.replace("site_","");case t.EVENT_SITE_WATCHLIST_REMOVE:return t.EVENT_SITE_WATCHLIST_REMOVE.replace("site_","");case t.EVENT_SITE_SEARCH:return"search";case t.EVENT_SITE_SEARCH_ITEM_SELECTION:return"searchitemselected";default:return e.indexOf("site_")>-1?"view":e}},ee=({tracking:e,siteContext:n,additionalProps:t={},name:r})=>{var y;const s=e.PROPERTIES,{collectionID:i,currentSite:a,currentUser:o,page:c,productID:E,videoID:m}=n,h={[s.PROPERTY_COLLECTION_ID]:i,[s.PROPERTY_DEVICE]:"web",[s.PROPERTY_DEVICE_ID]:null,[s.PROPERTY_NAME]:r||((y=c==null?void 0:c.PROPERTIES)==null?void 0:y.NAME)||"view",[s.PROPERTY_PLATFORM]:"web",[s.PROPERTY_PLATFORM_ID]:null,[s.PROPERTY_PLATFORM_VERSION]:null,[s.PROPERTY_PRODUCT_ID]:E,[s.PROPERTY_REFERRER]:document.referrer,[s.PROPERTY_SITE_ID]:a.id,[s.PROPERTY_TIMESTAMP]:new Date().getTime(),[s.PROPERTY_TYPE]:"platform",[s.PROPERTY_URL]:window.location.href,[s.PROPERTY_USER_EMAIL]:o.email,[s.PROPERTY_USER_ID]:o.id,[s.PROPERTY_VIDEO_ID]:m,[s.PROPERTY_VIEW]:Oe(n),[s.PROPERTY_SESSION_ID]:e.SESSION};let p=t;return(t==null?void 0:t.type)==="video"&&(p={...t,collection_id:null,product_id:null}),["category","collection","movie","playlist","series"].includes(t==null?void 0:t.type)&&(p={...t,video_id:null,product_id:null}),(t==null?void 0:t.type)==="product"&&(p={...t,collection_id:null,video_id:null}),{...h,...p,[s.PROPERTY_TYPE]:"platform",[s.PROPERTY_URL]:t.url||window.location.href}},Mt=(e,n={})=>{var t,r;return(t=n.DEPRECATED_EVENTS)!=null&&t.includes(e)?"":(r=n.UPDATED_EVENTS)!=null&&r[e]?n.UPDATED_EVENTS[e]:e},K={settings:{"/settings/billing":"settings_billing","/settings/emails":"settings_emails","/settings/info":"settings_info","/settings/purchases":"settings_purchases"},others:{tos:"terms_of_service",unavailable:"unavailable_geoblocked"}},Oe=e=>{const{activeView:n}=e,t=window.location.pathname;return t.substring(t.lastIndexOf("../index.html")+1)==="send_login_email"?"login_email_sent":K.settings[t]?K.settings[t]:K.others[n]?K.others[n]:n.replace(/-/g,"_")},Lt=(e,n,t)=>{const{collectionID:r,currentSite:s,video:i}=e.siteContext;return{...ee({tracking:n,siteContext:e.siteContext,additionalProps:{current_src:i.current_src,current_type:i.current_type,duration:i.duration,is_chromecast:i.is_chromecast?1:0,is_drm:i.is_drm?1:0,is_fullscreen:i.is_fullscreen?1:0,is_live:Ut("live")!=="0"?1:0,is_trailer:i.is_trailer?1:0,platform_id:null,seconds:s.segment_heartbeat_frequency,timecode:i.current_time,type:"video"},name:t}),collection_id:r,type:"video",view:void 0}},q=e=>{const n=document.createElement("iframe");n.setAttribute("width","1"),n.setAttribute("height","1"),n.frameBorder=0,n.src=e,n.style.display="none",document.body.appendChild(n)},ve=e=>{const n=document.createElement("script");n.type="text/javascript",n.src=e,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)},Ht=e=>{const n=r=>{var m;const{siteContext:s,trackingData:i={}}=r,a=xt(s.eventName,e),o={};for(const[h,p]of Object.entries(i))p!=null&&(o[h]=p);const c=ee({tracking:e,siteContext:s,name:a,additionalProps:o}),E=Object.entries(c).map(([h,p])=>h+"="+encodeURIComponent(p)).join("&");((m=window._vhx)==null?void 0:m.environment)==="production"?new Image().src=e.PROPERTIES.PROPERTY_COLLECTOR_URL+"?"+E:console.log(e.PROPERTIES.PROPERTY_COLLECTOR_URL+"?"+E)};(()=>{const r={...e.EVENTS};delete r[e.EVENTS.EVENT_AUTHENTICATION_IDENTIFY_USER],Object.entries(r).forEach(s=>{S.subscribe(s[1],n)})})()},fe="adclicked",Gt=["ended","pause","play","seeked","seeking","timeupdate","resume","startbuffering","endbuffering","adstart","adfinish","adfail","adskip","fullscreenchange"],Ft=()=>{let e=null,n=null;const t=(c,E,m,h)=>{const p=E||n.currentTime()||0,y=m||n.duration()||0;S.publish(h,{event:c,currentTime:p,duration:y,playerEvent:h})},r=()=>{Gt.forEach(c=>{n==null||n.on(c,(E,m,h)=>{t(E,m,h,c)})}),window.addEventListener("message",c=>{(c.data&&typeof c.data=="string"?JSON.parse(c.data):{}).method===fe&&t({},void 0,void 0,fe)},!1)},s=()=>{e=setInterval(()=>{i()},1e3)},i=()=>{window.VHX&&typeof window.VHX.Player=="function"&&(clearInterval(e),a())},a=()=>{n=window.VHX.Player("watch-embed"),r()};return(()=>{window.VHX.Player?a():s()})(),{getInstance:()=>n}},qt=e=>{let n=null,t;const r={ended:e.EVENTS.EVENT_SEGMENT_VIDEO_ENDED,pause:e.EVENTS.EVENT_SEGMENT_VIDEO_PAUSE,play:e.EVENTS.EVENT_SEGMENT_VIDEO_PLAY,seeked:e.EVENTS.EVENT_SEGMENT_VIDEO_SEEKED,seeking:e.EVENTS.EVENT_SEGMENT_VIDEO_SEEKING,timeupdate:e.EVENTS.EVENT_SEGMENT_VIDEO_TIMEUPDATE,resume:e.EVENTS.EVENT_SEGMENT_VIDEO_RESUME,startbuffering:e.EVENTS.EVENT_SEGMENT_VIDEO_START_BUFFER,endbuffering:e.EVENTS.EVENT_SEGMENT_VIDEO_END_BUFFER,adstart:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_START,adclicked:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_CLICKED,adfinish:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_FINISH,adfail:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_FAIL,adskip:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_SKIP},s={[e.EVENTS.EVENT_AUTHENTICATION_LOGIN]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNIN_VIEW,[e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_VIEW]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNIN_VIEW,[e.EVENTS.EVENT_AUTHENTICATION_SIGNUP_VIEW]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNUP_VIEW,[e.EVENTS.EVENT_AUTHENTICATION_SIGNUP_STARTED]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNUP_STARTED,[e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_STARTED]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_PURCHASE_STARTED,[e.EVENTS.EVENT_AUTHENTICATION_CONVERSION]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_CONVERSION,[e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_CONVERSION,[e.EVENTS.EVENT_AUTHENTICATION_REGISTRATION]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_REGISTRATION,[e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNIN_COMPLETE,[e.EVENTS.EVENT_EXTRA_VIEWED]:e.EVENTS.EVENT_SEGMENT_EXTRA_VIEWED,[e.EVENTS.EVENT_SITE_WATCHLIST_ADD]:e.EVENTS.EVENT_SEGMENT_VIDEO_WATCHLIST_ADD,[e.EVENTS.EVENT_SITE_WATCHLIST_REMOVE]:e.EVENTS.EVENT_SEGMENT_VIDEO_WATCHLIST_REMOVE,[e.EVENTS.EVENT_VIDEO_COMMENT]:e.EVENTS.EVENT_SEGMENT_VIDEO_COMMENT_ADDED,[e.EVENTS.EVENT_SEARCH_ITEM_SELECTED]:e.EVENTS.EVENT_SEGMENT_SEARCH_ITEM_SELECTED,[e.EVENTS.EVENT_SEARCH]:e.EVENTS.EVENT_SEGMENT_SEARCH_EXECUTED},i=d=>{var l;return d?((l=d==null?void 0:d.parent)==null?void 0:l.type)==="series"?`${d.parent.name}: ${d.name}`:d.name:""},a=()=>{var me,Te;const{eventName:d,collectionTitle:l,videoTitle:_,canonicalCollection:f}=n.siteContext,N=ee({tracking:e,siteContext:n.siteContext,name:h(d),additionalProps:{type:(me=n.trackingData)==null?void 0:me.type,url:(Te=n.trackingData)==null?void 0:Te.url}}),{collection_id:v,video_id:te}=N,ne=i(f),nt=f?{collection_id:f.id,collection_title:ne}:{collection_id:v,collection_title:l};return{...N,...nt,video_title:te?_:null}},o=()=>({...a(),path:window.location.pathname}),c=()=>{const{currentUser:d,currentSite:l}=n.siteContext;return{name:d.name,email:d.email,vimeo_id:d.id?String(d.id):void 0,sso_id:l.sso_enabled&&d.external_user_id?String(d.external_user_id):void 0}},E=()=>{const{currentSite:d,currentUser:l}=n.siteContext,_=ee({tracking:e,siteContext:n.siteContext}),f=[{collection:"users",encoding:"none",type:"vimeo_id",id:l.id?String(l.id):void 0}];return d.sso_enabled&&f.push({collection:"users",encoding:"none",type:"sso_id",id:l.external_user_id?String(l.external_user_id):void 0}),{context:{app:{name:d.title||_[e.PROPERTIES.PROPERTY_PLATFORM],version:_[e.PROPERTIES.PROPERTY_PLATFORM_VERSION]},externalIds:f,locale:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},traits:c()}},m=(d={})=>{const{product_id:l,product_name:_,product_sku:f,campaign:N}=d;return{revenue:d.amount.cents/100,context:{transaction:{product_id:l,product_name:_,product_sku:f,campaign:N}}}},h=d=>s[d],p=d=>{const{currentSite:l,setVideoProperty:_,video:f}=n.siteContext,N=l.segment_heartbeat_frequency;d%N===0&&N>0&&f.last_ten_seconds_tracked!==d&&(_("last_ten_seconds_tracked",d),C(e.EVENTS.EVENT_SEGMENT_VIDEO_TIMEUPDATE))},y=({currentTime:d})=>{const{setVideoProperty:l,video:_}=n.siteContext;l("current_time",d),_.has_firstplay||(C(e.EVENTS.EVENT_SEGMENT_VIDEO_PLAY),l("has_firstplay",!0))},V=(d,l)=>{const{setVideoProperty:_,video:f}=n.siteContext,N=Math.floor(l*.25),v=Math.floor(l*.5),te=Math.floor(l*.75),ne=Math.floor(l*.9);d>=N&&!f.has_watched_quartile_one&&(C(e.EVENTS.EVENT_SEGMENT_VIDEO_QUARTER_PROGRESS_PERCENTILE),_("has_watched_quartile_one",1)),d>=v&&!f.has_watched_quartile_two&&(C(e.EVENTS.EVENT_SEGMENT_VIDEO_HALF_PROGRESS_PERCENTILE),_("has_watched_quartile_two",1)),d>=te&&!f.has_watched_quartile_three&&(C(e.EVENTS.EVENT_SEGMENT_VIDEO_THIRD_PROGRESS_PERCENTILE),_("has_watched_quartile_three",1)),d>=ne&&!f.has_watched_quartile_complete&&(C(e.EVENTS.EVENT_SEGMENT_VIDEO_COMPLETE_PROGRESS_PERCENTILE),_("has_watched_quartile_complete",1))},U=({currentTime:d,duration:l})=>{const _=Math.floor(d),f=Math.ceil(l),{setVideoProperty:N,video:v}=n.siteContext;v.duration!==!1&&v.segment_has_initialized===!1?(V(_,f),N("segment_has_initialized",1)):N("duration",f),p(_),v.last_duration_change!==_&&(V(_,f),N("last_duration_change",_),N("current_time",d))},C=d=>{if(window.analytics){const{collectionTitle:l,videoTitle:_}=n.siteContext,f={...Lt(n,e,d),collection_title:l,video_title:_};window.analytics.track(d,f,E())}},b=({playerEvent:d,currentTime:l,duration:_})=>{if(!n)return;const{setVideoProperty:f}=n.siteContext,N=Math.floor(l),v=Math.ceil(_);f("current_time",N),f("duration",v),d==="timeupdate"?U({playerEvent:d,currentTime:l,duration:_}):d==="play"?y({playerEvent:d,currentTime:l,duration:_}):C(r[d])},W=()=>{const{video:d,setVideoProperty:l}=n.siteContext;l("is_fullscreen",!d.is_fullscreen)},L=d=>{if(n=d,t=Ft(),window.VHX.video){const{setVideoProperty:l}=n.siteContext,_=t==null?void 0:t.getInstance(),f=window.VHX.video.isDRM==="false"?0:1,N=window.VHX.video.isTrailer==="false"?0:1;l("current_src",_==null?void 0:_.currentSrc()),l("is_chromecast",_==null?void 0:_.isCasting()),l("is_drm",f),l("is_fullscreen",_==null?void 0:_.isFullscreen()),l("is_trailer",N)}},u=d=>{const{eventName:l}=d.siteContext;window.analytics&&l&&(n=d,window.analytics.ready(()=>{const _=h(l);_&&window.analytics.track(_,a(),E())}))},T=d=>{const{eventName:l}=d.siteContext;n=d;const _=E(),f=m(d.transaction);if(window.analytics&&l){const N=h(l);if(N){const v={...a(),order_id:d.transaction.id,transaction_id:d.transaction.id};window.analytics.track(N,v,{..._,context:{..._.context,...f.context},traits:c(),revenue:f.revenue})}}},w=()=>{const{currentUser:d,currentSite:l}=n.siteContext;l.segment_includes_user_id&&d.id?window.analytics.user().id()!==String(d.id)&&window.analytics.user().id(d.id):window.analytics.user().id(null)},g=()=>{const{currentSite:d,currentUser:l}=n.siteContext;if(l.id){const _={...E(),traits:void 0};d.segment_includes_user_id?window.analytics.identify(l.id,c(),_):window.analytics.identify(c(),E())}else window.analytics.reset()},P=d=>{const{eventName:l}=d.siteContext;n=d,window.analytics&&l&&g()},O=d=>{n=d,window.analytics&&window.analytics.ready(()=>{w(),window.analytics.page(Oe(n.siteContext),o(),E())})},k=d=>{const{eventName:l}=d.siteContext;if(window.analytics&&l){n=d;const _=h(l),f=new URLSearchParams(window.location.search),N={...a(),search_query:f.get("q")};_&&window.analytics.track(_,N,E())}};(()=>{if(!window.Segment_ID)return;const d=[e.EVENTS.EVENT_AUTHENTICATION_IDENTIFY_USER,e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE,e.EVENTS.EVENT_SETTINGS_SAVE_PROFILE,e.EVENTS.EVENT_SETTINGS_SAVE_CARD,e.EVENTS.EVENT_SETTINGS_SAVE_NOTIFICATIONS];Object.entries(e.EVENTS).forEach(l=>{const _=l[1];_===e.EVENTS.EVENT_AUTHENTICATION_CONVERSION?S.subscribe(_,T):_===e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED?S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,T):d.includes(_)?S.subscribe(_,P):_===e.EVENTS.EVENT_SITE_PAGE_VIEW?S.subscribe(_,O):_===e.EVENTS.EVENT_SITE_VIDEO_CLICK?S.subscribe(_,L):_===e.EVENTS.EVENT_SEARCH?S.subscribe(_,k):S.subscribe(_,u)}),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE,u),Object.keys(r).forEach(l=>{S.subscribe(l,b)}),S.subscribe("fullscreenchange",W)})()};class $t{constructor({page:n={},currentUser:t={},currentSite:r={}}){this.page=n,this.currentUser=t,this.currentSite=r,this.video={has_firstplay:!1,current_time:0,duration:0,last_duration_change:0,last_ten_seconds_tracked:0,segment_has_initialized:!1,has_watched_quartile_one:0,has_watched_quartile_two:0,has_watched_quartile_three:0,has_watched_quartile_complete:0,is_chromecast:0,is_drm:0,is_trailer:0,current_src:"",current_type:"video",is_live:0,is_fullscreen:0},this.setVideoProperty=this.setVideoProperty.bind(this)}set eventName(n){this._eventName=n}get eventName(){return this._eventName}set video(n){this._video=n}get video(){return this._video}get isEnabled(){return Object.keys(this.currentSite).length>0&&Object.keys(this.currentUser).length>0}get hasPageProperties(){return this.page&&Object.keys(this.page).length>0}get activeView(){var n,t;return((t=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:t.VIEW_TYPE)||window.location.pathname.split("../index.html")[1]}get productID(){var n,t,r;return Number(((t=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:t.PRODUCT_ID)||this.currentProductId||((r=this.eventProps)==null?void 0:r.id)||null)}get collectionID(){var n,t,r;return((t=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:t.COLLECTION_ID)||((r=this.eventProps)==null?void 0:r.id)||null}get collectionTitle(){var n,t,r;return((t=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:t.COLLECTION_TITLE)||((r=this.eventProps)==null?void 0:r.label)||null}set eventProps(n){this._eventProps=n}get eventProps(){return this._eventProps||{}}get videoID(){var n,t,r;return((t=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:t.VIDEO_ID)||((r=this.eventProps)==null?void 0:r.id)||null}get videoTitle(){var n,t,r;return((t=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:t.VIDEO_TITLE)||((r=this.eventProps)==null?void 0:r.label)||kt("og:title")||null}get isGDPRProtected(){return window.location.search.indexOf("no_cookies=1")!=-1||z.get("gcp")==="0"}get isMadeForKids(){return this.currentSite.made_for_kids}get isTrackingDisabled(){return Object.keys(this.currentSite).length>0?this.isGDPRProtected||this.isMadeForKids&&this.currentSite.made_for_kids_tracking_blocked:this.isGDPRProtected}get isAdminVisit(){return window.location.pathname.indexOf("/admin")!==-1}get currentProductId(){return typeof window.VHX.data.product=="object"?Number(window.VHX.data.product.id):typeof window._vhx.product=="object"?Number(window._vhx.product.id):null}get canonicalCollection(){var n,t,r;return((n=this.eventProps)==null?void 0:n.canonical_collection)||((r=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:r.CANONICAL_COLLECTION)||null}setPageProperty(n,t){var s;const r=(s=this.page)==null?void 0:s.PROPERTIES;this.page.PROPERTIES={...r,[n]:t}}getPageProperty(n){var t;(t=this.page)==null||t.PROPERTIES[n]}setVideoProperty(n,t){this._video[n]=t}}const jt=e=>{const{currentUser:n}=e.siteContext;return{9867:()=>{q("https://5039270.fls.doubleclick.net/activityi;src=5039270;type=black00;cat=blksxybp;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1?")},22104:()=>{const t=t||[];n.email&&(t.push(["identify",{$email:n.email}]),t.push(["track","Started Checkout",{}])),new Image().src="https://images.inthe.net/api/GetImage?type=tp&ad_act_type=7d19a336-f3b3-408e-a6b3-0a98998f0b44&ad_id=ea4cf077-de7b-4ece-9505-68a37aba55a3&vender=VetTV_Checkout"},27600:()=>{new Image().src="//in.getclicky.com/101014264ns.gif"},30697:()=>{new Image().src="https://secure.adnxs.com/px?id=934372&t=1"},44887:()=>{const t="https://u.fg8dgt.com/pixel?type=js&id=434&cb="+Math.floor(Math.random()*1e8);ve(t)},105720:()=>{const t=document.createElement("script");t.type="text/javascript",t.src="../../cactusmedia.com/js/p-06032020.js",document.body.parentNode.insertBefore(t,document.body.nextSibling);const r=document.createElement("script");r.type="text/javascript",r.src="../../www.tp88trk.com/scripts/sdk/everflow.js",document.body.parentNode.insertBefore(r,document.body.nextSibling),window.EF&&window.EF.click({offer_id:window.EF.urlParameter("oid"),affiliate_id:window.EF.urlParameter("affid"),sub1:window.EF.urlParameter("sub1"),sub2:window.EF.urlParameter("sub2"),sub3:window.EF.urlParameter("sub3"),sub4:window.EF.urlParameter("sub4"),sub5:window.EF.urlParameter("sub5"),uid:window.EF.urlParameter("uid"),transaction_id:window.EF.urlParameter("tid")})},92559:()=>{new Image().src="https://tags.w55c.net/rs?id=e23117610b84432cba12d0a1135ddecc&t=cart&sku="+window.VHX.data.product.sku}}},Yt=e=>{const{siteContext:{currentUser:n},transaction:t}=e;return{1251:()=>{new Image().src="https://secure.adnxs.com/px?id=192571&order_id=[ORDER_ID]&value=[REVENUE]&t=2"},125888:()=>{const r=new Image;r.src="https://insight.adsrvr.org/track/pxl/?adv=b25nneq&amp;ct=0:8cispjt&amp;fmt=3",r.width="1",r.height="1",r.style="border-style:none"},90968:()=>{const r=new Image;r.src="https://segment.prod.bidr.io/associate-segment?buzz_key=dsp&amp;segment_key=dsp-6448&amp;value=",r.width="0",r.height="0";const s=new Image;s.src="https://cnv.event.prod.bidr.io/log/cnv?tag_id=191&amp;buzz_key=dsp&amp;value=&amp;segment_key=dsp-6448&amp;account_id=39&amp;order=1&amp;ord=1",s.width="0",s.height="0"},4004:()=>{if(t.product_id==3865){const r=`https://4338601.fls.doubleclick.net/activityi;src=4338601;type=purch1;cat=wpmh01;qty=1;cost=${t.amount.format};ord=${t.id}?`;q(r)}},7218:()=>{const i=`https://4533508.fls.doubleclick.net/activityi;src=4533508;type=afc-ats;cat=atsconfm;ord=${(Math.random()+"")*1e13}?`;q(i),window.friendbuy=window.friendbuy||[],window.friendbuy.push(["site","site-b6444db1-www.againstthesun.com"]),window.friendbuy.push(["track","customer",{id:t.user_id,email:t.user_email}]),window.friendbuy.push(["track","order",{id:t.id,amount:t.amount.cents/100}]),ve("https://djnf6e5yyirys.cloudfront.net/js/friendbuy.min.js")},7247:()=>{new Image().src="https://dc.ads.linkedin.com/collect/?pid=321466&conversionId=365345&fmt=gif"},11725:()=>{var r=t.amount.cents/100,s=t.id;window.tbEvents=[],window.tbEvents.push({eventName:"purchase",eventAmount:r,orderKey:s}),new Image().src=`https://tradablebits.com/pixels/7177498/event?event_name=purchase&event_amount=${r}&order_key=${s}`},108459:()=>{var r=t.id,s=t.amount.cents/100,i=i||[];i.push({qacct:"p-2UPkbcw6Ne-Tf",labels:"_fp.event.Player Purchase Confirmation",orderid:`${r}`,revenue:`${s}`,event:"refresh"})},12189:()=>{q("https://www.googletagmanager.com/ns.html?id="+"GTM-PQGT28")},18790:()=>{if(window.Attribution){var r="";z.get("anonymousAttribution")?r=z.get("anonymousAttribution"):context.getParams("anon")&&(r=context.getParams("anon")),window.Attribution.alias(t.user_id,r),window.Attribution.identify(t.user_id,{name:t.user_name,email:t.user_email,product_id:t.product_id,createdAt:new Date}),window.Attribution.track("Completed Purchase",{revenue:t.amount.cents/100})}window.mbsy&&(window.mbsy.identify({email:n.email}),window.mbsy.track({revenue:t.amount.cents/100}));const s=new Image;s.src=`https://ad.doubleclick.net/ddm/activity/src=11893105;type=mhzsa0;cat=start0;qty=1;cost={transaction.amount.format};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=;gdpr_consent=;ord=${t.id}?`,s.width="1",s.height="1",typeof gtag=="function"&&window.gtag("event","purchase",{send_to:"DC-11893105/mhzsa0/start0+transactions",value:t.amount.cents/100,transaction_id:t.id})},20255:()=>{new Image().src=`https://www.clickmeter.com/conversion.aspx?id=B3F97E49EE2C40CE82091CF0A787F0B6&val=${t.amount.cents/100}&param=${t.product_name}&com=0.00&comperc=0.00`,window.Tracking.SITE_GANALYTICS_ENABLED&&window.ga("site.send","event","Login and Signup","Signup Success","Onsite",{dimension1:n.id,dimension2:"Yes",dimension3:"Onsite",metric1:"1"})},20369:()=>{typeof window.ga=="function"&&window.ga("send","event","dekkoosubscription","subscription","youtube",t.amount.cents/100)},22104:()=>{const r=t.amount.cents/100,s=new Date,i=i||[];i.push(["identify",{$email:t.user_email}]),i.push(["track","Placed Order",{customer_properties:{$email:t.user_email,$first_name:t.user_name},properties:{$event_id:t.id,$value:r,ItemNames:["Veteran Television Subscription"]},Items:[{SKU:"VETTV_SVOD",ProductName:"Veteran Television Subscription",Quantity:1}],time:s}]),window._conv_q=window._conv_q||[],window._conv_q.push(["pushRevenue",r,"1","100312760"])},24862:()=>{const r=`https://ashleyborden.ositracker.com/sales/salejs/amount:${t.amount.cents/100}/transaction:${t.id}/firstname:FIRST_NAME/lastname:LAST_NAME`;q(r)},27600:()=>{new Image().src="//in.getclicky.com/101014264ns.gif"},28998:()=>{new Image().src="https://servedbyadbutler.com/convtrack.spark?ID=170140",typeof gtag=="function"&&window.gtag("event","conversion",{send_to:"AW-842820571/CggmCKrCxHoQ29fxkQM",transaction_id:t.id})},30697:()=>{new Image().src="https://secure.adnxs.com/px?id=934366&t=1"},31496:()=>{const r=setInterval(function(){typeof _refersion=="function"&&(clearInterval(r),window._refersion(function(){window._rfsn._addTrans({order_id:t.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:t.user_name,email:t.user_email}),window._rfsn._addItem({sku:t.product_id,quantity:"1",price:t.amount.cents/100}),window._rfsn._sendConversion()}))},500)},88695:()=>{var r=t.is_free_trial?0:t.amount.cents/100;const s=setInterval(function(){typeof _refersion=="function"&&(clearInterval(s),window._refersion(function(){window._rfsn._addTrans({order_id:t.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:t.user_name,email:t.user_email}),window._rfsn._addItem({sku:t.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},38126:()=>{var r=t.is_free_trial?0:t.amount.cents/100;const s=setInterval(function(){typeof _refersion=="function"&&(clearInterval(s),window._refersion(function(){window._rfsn._addTrans({order_id:t.id,currency_code:"USD",discount_code:t.promo_code}),window._rfsn._addCustomer({first_name:t.user_name,email:t.user_email}),window._rfsn._addItem({sku:t.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},32557:()=>{window.mbsy&&(window.mbsy.identify({email:n.email}),window.mbsy.track({revenue:t.amount.cents/100}))},33064:()=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"signup-success"})},44887:()=>{typeof gtag=="function"&&(window.dataLayer=window.dataLayer||[],window.gtag("event","conversion",{send_to:"AW-865543806/CWQxCImeuIYBEP7M3JwD"}))},61429:()=>{var m;var r=localStorage.getItem("ajs_user_traits"),s=(m=JSON.parse(r))==null?void 0:m.email;if(s.length){var i=btoa(s);window._refersion(function(){window._rfsn._addCart(i)})}else window._refersion();var a=t.user_id,o=a.toString(),c={debug:"false",parameters:{firstname:t.user_name,email:t.user_email,externalidentifier:o,amount:t.amount.cents}},E=window.rrSpace;E.executeEvent("conversion",c)},87218:()=>{window.mbsy&&(window.mbsy.identify({email:n.email}),window.mbsy.track({revenue:t.amount.cents/100}));var r=t.is_free_trial?0:t.amount.cents/100;const s=setInterval(function(){typeof _refersion=="function"&&(clearInterval(s),window._refersion(function(){window._rfsn._addTrans({order_id:t.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:t.user_name,email:t.user_email}),window._rfsn._addItem({sku:t.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},138067:()=>{var r=t.is_free_trial?0:t.amount.cents/100;const s=setInterval(function(){typeof _refersion=="function"&&(clearInterval(s),window._refersion(function(){window._rfsn._addTrans({order_id:t.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:t.user_name,email:t.user_email}),window._rfsn._addItem({sku:t.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},89479:()=>{typeof growsumo=="object"&&(window.growsumo.data.name=t.user_name,window.growsumo.data.email=t.user_email,window.growsumo.data.customer_key=t.user_email,window.growsumo.createSignup())},92559:()=>{var r=t.amount.cents/100;new Image().src=`https://tags.w55c.net/rs?id=2f3de766ba814e09a00ac96795b571b1&t=checkout&tx=${t.id}&sku=${t.product_sku}price=${r}`,typeof gtag=="function"&&window.gtag("event","conversion",{send_to:"AW-653956162/ZnpDCMO3t80BEMKo6rcC",value:r,currency:t.amount.currency})},103125:()=>{var r=t.amount.cents/100;typeof gtag=="function"&&window.gtag("event","conversion",{send_to:"AW-499481611/0seWCISQ7-QCEIv4le4B",value:r,currency:t.amount.currency})},84150:()=>{window.ire("trackConversion",23208,{orderId:t.id,customerId:t.user_id,customerEmail:"",currencyCode:t.amount.currency,orderPromoCode:t.promo_code,items:[{subTotal:t.amount.cents/100,category:t.subscription_frequency,sku:t.product_sku,quantity:1}]},{verifySiteDefinitionMatch:!0})},71759:()=>{t.purchase_type==="subscription"?window.ire("trackConversion",24992,{orderId:t.id,customerId:t.user_id,customerEmail:"",currencyCode:t.amount.currency,orderPromoCode:t.promo_code},{verifySiteDefinitionMatch:!0}):t.purchase_type==="purchase"&&window.ire("trackConversion",24994,{orderId:t.id,customerId:t.user_id,customerEmail:"",currencyCode:t.amount.currency,orderPromoCode:t.promo_code,items:[{subTotal:t.amount.cents/100,category:t.purchase_type,sku:t.product_sku,quantity:1}]},{verifySiteDefinitionMatch:!0})},105720:()=>{new Image().src="https://cactusmedia.com/js/pe1v2-07022020.js",new Image().src="https://tag.simpli.fi/sifitag/5335f080-72e9-0139-af88-06a60fe5fe77",q("https://ahghe.com/v/1/c/p/1/o/28044");const s=new Image;s.src="https://pixel.sitescout.com/iap/b40da9a9030f8c49",s.width="1",s.height="1",s.style="position: absolute",s.left="-150px";const i=t.amount.cents/100,a=new Image;a.src=`https://www.shareasale.com/sale.cfm?tracking=${t.id}&amount=${i}&merchantID=102817&transtype=sale&skulist=${t.product_sku}&pricelist=${i}&quantitylist=${t.units}&currency=${t.amount.currency}`,a.height="1",a.width="1";const o=document.createElement("script");o.innerHTML=`(function(){var x=null,p,q,m, o="32450", l=${t.id}, i=${i}, c="", k="", g="", j="", u="", shadditional=""; try{p=top.document.referer!==""?encodeURIComponent(top.document.referrer.substring(0,512)):""}catch(n){p=document.referrer!==null?document.referrer.toString().substring(0,512):""}try{q=window&&window.top&&document.location&&window.top.location===document.location?document.location:window&&window.top&&window.top.location&&""!==window.top.location?window.top.location:document.location}catch(b){q=document.location}try{m=parent.location.href!==""?encodeURIComponent(parent.location.href.toString().substring(0,512)):""}catch(z){try{m=q!==null?encodeURIComponent(q.toString().substring(0,512)):""}catch(h){m=""}}var A,y=document.createElement("script"),w=null,v=document.getElementsByTagName("script"),t=Number(v.length)-1,r=document.getElementsByTagName("script")[t];if(typeof A==="undefined"){A=Math.floor(Math.random()*100000000000000000)}w="dx.mountain.com/spx?conv=1&shaid="+o+"&tdr="+p+"&plh="+m+"&cb="+A+"&shoid="+l+"&shoamt="+i+"&shocur="+c+"&shopid="+k+"&shoq="+g+"&shoup="+j+"&shpil="+u+shadditional;y.type="text/javascript";y.src=("https:"===document.location.protocol?"https://":"http://")+w;r.parentNode.insertBefore(y,r)}());`,document.body.appendChild(o);const c=document.createElement("script");c.type="text/javascript",c.defer="defer",c.src="https://www.dwin1.com/19038.js",document.body.appendChild(c);const E=new Image;E.src="//d.adroll.com/ipixel/CU7EEK6ZURBG7P6TZDFSGI/KREM3ZUWSRGDBBHFISXS5L?name=34e9ca5c",E.height="1",E.width="1",new Image().src="https://www.tp88trk.com/scripts/sdk/everflow.js",window.EF.conversion({aid:293}),window._ubaq=window._ubaq||[],window._ubaq.push(["trackGoal","convert"]);const m=document.createElement("script");m.type="text/javascript",m.src="https://d3pkntwtp2ukl5.cloudfront.net/uba.js",document.body.appendChild(m),window.ndp("track","CONVERSION");const h=new Image;h.src="https://flask.nextdoor.com/pixel?pid=dd5a87eb-83d4-4f10-bf31-41d427b72590&ev=CONVERSION&noscript=1",h.height="1",h.width="1";const p=new Image;p.src="https://pixel.tvsciapi.com/pixel?l=tvscientific-pix-o-923a385e-4205-4412-af3a-2440df5116c1",p.width="0",p.height="0",p.style="display: none";const y=document.createElement("script");y.innerHTML=`(function () {var p, s, d, w;d = document;w = window.location;p = d.createElement("IMG");s = w.protocol + "//pix.pub/t.png?&t=" + (new Date).getTime() + "&l=tvscientific-pix-o-923a385e-4205-4412-af3a-2440df5116c1&u3=" + encodeURIComponent(w.href) + "&u1=complete_purchase&u2=${i}&u4=${t.id}&u5=";p.setAttribute("src", s);p.setAttribute("height", "1");p.setAttribute("width", "1");d.body.appendChild(p);})();`,document.body.appendChild(y),window.ire("trackConversion",27291,{orderId:t.id,customerId:t.user_id,customerEmail:"",currencyCode:t.amount.currency,orderPromoCode:t.promo_code,items:[{subTotal:t.amount.cents/100,category:t.subscription_frequency,sku:t.product_sku,quantity:1}]},{verifySiteDefinitionMatch:!0})},95172:()=>{new Image().src=`https://mistingsmarket.com/p.ashx?o=2487&e=585&fjs&t=${t.id}`},113239:()=>{const r=t.amount.cents/100,s=new Image;s.src=`https://www.shareasale.com/sale.cfm?tracking=${t.id}&amount=${r}&merchantID=107127&transtype=sale&skulist=${t.product_sku}&pricelist=${r}&quantitylist=${t.units}&currency=${t.amount.currency}`,s.height="1",s.width="1";const i=document.createElement("script");i.type="text/javascript",i.defer="defer",i.src="https://www.dwin1.com/19038.js",document.body.appendChild(i),new Image().src="https://www.dlap2tk.com/scripts/sdk/everflow.js",window.EF.conversion({aid:1,amount:r,email:t.user_email})},91041:()=>{const r=t.amount.cents/100,s=new Image;s.src=`https://www.shareasale.com/sale.cfm?tracking=${t.id}&amount=${r}&merchantID=1202861&transtype=sale&skulist=${t.product_sku}&pricelist=${r}&quantitylist=${t.units}&currency=${t.amount.currency}`,s.height="1",s.width="1";const i=document.createElement("script");i.type="text/javascript",i.defer="defer",i.src="https://www.dwin1.com/19038.js",document.body.appendChild(i)},107227:()=>{window.pintrk&&window.pintrk("track","checkout",{order_quantity:1})},129746:()=>{const r=t.referrer,s=t.amount.currency,i=t.promo_code,a=0,o=t.id,c=t.amount.cents/100,E=`DEFAULT:${c}`;var m={};m.Tracking={},m.Tracking.Sale={},m.Tracking.Sale.amount=c,m.Tracking.Sale.channel=r,m.Tracking.Sale.orderRef=o,m.Tracking.Sale.parts=E,m.Tracking.Sale.currency=s,m.Tracking.Sale.voucher=i,m.Tracking.Sale.test=a;var h=document.createElement("script");h.src="https://www.dwin1.com/19522.js",h.type="text/javascript",h.setAttribute("defer","defer"),document.body.appendChild(h),new Image().src=`https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=19522&amount=${c}&cr=${s}&ref=${o}&parts=${E}&vc=${i}&ch=${r}&testmode=${a}`},139215:()=>{const r=t.amount.cents/100,s=t.id,i=new Date().toISOString().replace(/T/,"-").replace(/\..+/,"").replace(/:/g,"-");t.subscription_frequency==="monthly"?new Image().src=`https://pm.geniusmonkey.com/gm.png?id=226593869&quantity=${r}&confirmation_code=${s}&purchase_date=${i}`:t.subscription_frequency==="yearly"&&(new Image().src=`https://pm.geniusmonkey.com/gm.png?id=226593868&quantity=${r}&confirmation_code=${s}&purchase_date=${i}`)}}},Wt=e=>{const n=s=>{var i,a,o;try{(o=(a=jt(s))[(i=s.siteContext.currentSite)==null?void 0:i.id])==null||o.call(a)}catch(c){console.log(c)}},t=s=>{var i,a,o;try{(o=(a=Yt(s))[(i=s.siteContext.currentSite)==null?void 0:i.id])==null||o.call(a)}catch(c){console.log(c)}};(()=>{S.subscribe("site_checkout_page_open",n),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,t),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,t)})()},Xt=e=>{const n=(o,c,E)=>{typeof window.twq=="function"&&(o==null||o.forEach(m=>{(m.product_id&&m.product_id===c||!m.product_id)&&E(m)}))},t=o=>{const{currentSite:{twitter_pixel_codes:c},currentProductId:E}=o.siteContext;n(c,E,()=>{window.twq("track","CompleteRegistration",{num_items:"1"})})},r=o=>{const{currentSite:{twitter_pixel_codes:c}}=o.siteContext,E=o.transaction;n(c,E.product_id,()=>{window.twq("track","Purchase",{value:E.amount.cents/100,currency:E.amount.currency,num_items:"1",content_type:"product",content_ids:E.product_id,content_name:E.product_sku,order_id:E.id})})},s=o=>{const{currentSite:{twitter_pixel_codes:c},currentProductId:E}=o.siteContext;n(c,E,()=>{window.twq("track","InitiateCheckout")})},i=o=>{const{currentSite:{twitter_pixel_codes:c},currentProductId:E}=o.siteContext;n(c,E,m=>{window.twq("init",m.pixel_code),window.twq("track","PageView")})};(()=>{S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_REGISTRATION,t),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,r),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,r),S.subscribe("site_checkout_page_open",s),S.subscribe(e.EVENTS.EVENT_SITE_PAGE_VIEW,i)})()};class Bt{constructor(n){this.tracking=n.tracking,this.siteContext=new $t(n),this._init()}_init(){[At,Vt,Ht,qt,Xt,Wt].forEach(n=>{n(this.tracking)})}trackEvent(n,t){const{isEnabled:r,isTrackingDisabled:s}=this.siteContext;if(!r||s)return;const i=Mt(n,this.tracking);i&&(this.siteContext.eventName=i,S.publish(i,{siteContext:this.siteContext,trackingData:t||{}}))}trackSale(n){const{gdprProtected:t}=this.siteContext;if(t)return;const r=n.isTvod?this.tracking.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED:this.tracking.EVENTS.EVENT_AUTHENTICATION_CONVERSION;r&&(this.siteContext.eventName=r,S.publish(r,{siteContext:this.siteContext,transaction:n}))}}const D={tracking:window.Tracking||{},page:window.Page||{},currentUser:window._current_user||{},currentSite:window._current_site||{}},zt=()=>{const e=(s,i,a)=>{i==="video"?window.Stats.siteContext.setPageProperty("VIDEO_ID",a):window.Stats.siteContext.setPageProperty("COLLECTION_ID",a),s==="my-list-added"?(window.Stats.siteContext.setPageProperty("NAME","addwatchlist"),window.Stats.trackEvent(D.tracking.EVENTS.EVENT_SITE_WATCHLIST_ADD)):s==="my-list-removed"&&(window.Stats.siteContext.setPageProperty("NAME","removewatchlist"),window.Stats.trackEvent(D.tracking.EVENTS.EVENT_SITE_WATCHLIST_REMOVE))},n=()=>{function s(){const a=$(this).data("track-event-properties"),o=$(this).attr("href");window.Stats.siteContext.eventProps={...a,url:o},window.Stats.trackEvent($(this).data("track-event"),{...a,url:o})}function i(){const a=$(this).data("track-event-properties");window.Stats.siteContext.eventProps=a,window.Stats.trackEvent($(this).data("track-event"),a)}$(document).on("click","a[data-track-event]",s),$("form[data-track-event]").on("submit",i),$(window).on("tracking:propertyChange",(a,o)=>{window.Stats.siteContext.setPageProperty("NAME",o)}),document.addEventListener("my-list-added",a=>{var o,c;((o=a.detail)==null?void 0:o.type)&&((c=a.detail)==null?void 0:c.id)&&e("my-list-added",a.detail.type,parseInt(a.detail.id))}),document.addEventListener("my-list-removed",a=>{var o,c;((o=a.detail)==null?void 0:o.type)&&((c=a.detail)==null?void 0:c.id)&&e("my-list-removed",a.detail.type,parseInt(a.detail.id))}),window.addEventListener("message",a=>{let o={};if(a.data&&typeof a.data=="string")try{o=JSON.parse(a.data)}catch{console.warn("Unexpected message",a)}o.method==="watchlistadded"&&e("my-list-added","video",window.Stats.siteContext.videoID),o.method==="watchlistremoved"&&e("my-list-removed","video",window.Stats.siteContext.videoID)},!1),$("body").on("search:complete",()=>{window.Stats.trackEvent(D.tracking.EVENTS.EVENT_SEARCH)}),$("body").on("switch:triggered",()=>{window.Stats.trackEvent(D.tracking.EVENTS.EVENT_SITE_PAGE_VIEW)})},t=()=>{var i;window.Stats.trackEvent(D.tracking.EVENTS.EVENT_SITE_PAGE_VIEW),window.location.pathname.includes("/checkout")&&window.Stats.trackEvent("site_checkout_page_open"),z.get("logged_in")==="1"&&(window.Stats.trackEvent(D.tracking.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE),z.remove("logged_in"));const s=$("body").data("track-event");s&&s.indexOf("site_")===-1&&window.Stats.trackEvent(s),((i=D.page.PROPERTIES)==null?void 0:i.VIEW_TYPE)==="video"&&window.Stats.trackEvent(D.tracking.EVENTS.EVENT_SITE_VIDEO_CLICK)};return{init:()=>{t(),n()}}};window.Stats=new Bt(D);window.addEventListener("load",()=>{zt().init()});const be="FETCH_USER_SITE_DATA",Re="FETCH_INITIAL_DATA_FAILURE",Ae="UPDATE_CURRENT_PURCHASE",Ve="UPDATE_PURCHASED_STATUS",De="FETCH_FEATURE_FLAGS",Ue="SET_API_V2_CONFIG",Kt=()=>e=>fetch("/customers/data",{method:"GET",headers:I,credentials:"same-origin"}).then(M).then(n=>e({type:be,data:n})).catch(n=>{e({type:Re,data:n}),console.warn(n)}),yr=e=>n=>{n({type:Ae,currentPurchaseType:e})},Pr=e=>async n=>{const r=await(await fetch(`/customers/purchase_status/${e}`,{method:"GET",headers:I,credentials:"include"})).json();return n({type:Ve,hasPurchasedProduct:r.status,preexistingProcessingTransaction:r.preexisting_processing_transaction}),r.status},Jt=()=>async e=>{const t=await(await fetch("/customers/feature_flags/",{method:"GET",headers:I,credentials:"same-origin"})).json();e({type:De,featureFlags:t})},Qt=()=>e=>{e({type:Ue,apiV2Config:{api_v2_url:window.VHX.config.api_v2_url,api_v2_token:window.VHX.config.token}})},Zt="/transactions",en="/direct_transactions",ke="login",tn="signup",nn="standard",Cr="managed",rn="monthly_gift",sn="yearly_gift",xe="tvod_gift",Me="monthly",Le="yearly",ae="purchase",on="subscription",ce="rent",de="pwyw",Or=[Me,Le],vr=[ce,ae,de],an=[ce,ae,de,xe],cn=[rn,sn,xe],dn=[ce,ae,de],br="USD",Rr=100,Ar=20020,Vr=20001,Dr=5907,Ur=5001,kr="de",Se={APPROVED:"approved",FAILED:"failed",HOLDING:"holding",REQUIRES_ACTION:"requires_action",REQUIRES_CONFIRMATION:"requires_confirmation",PROCESSING:"processing"},xr=[Se.APPROVED,Se.HOLDING],un=["MX","SG"],Mr=wt({name:{id:"checkout.payment.name",defaultMessage:"Name on card"},postalCode:{id:"checkout.payment.postalcode",defaultMessage:"Postal code"},processing:{id:"checkout.processing",defaultMessage:"Processing...*"},completePreorder:{id:"checkout.preorder.complete",defaultMessage:"Complete preorder"},redeemNow:{id:"checkout.tvod.redeemnow",defaultMessage:"Redeem now"},startSubscription:{id:"checkout.svod.start",defaultMessage:"Start subscription"},completePurchase:{id:"checkout.payment.complete",defaultMessage:"Complete purchase"},accountRequired:{id:"checkout.account.required",defaultMessage:"An account is required to access your purchases."}});var ue={};Object.defineProperty(ue,"__esModule",{value:!0});var se=ue.sanitizeUrl=void 0,En=/^([^\w]*)(javascript|data|vbscript)/im,_n=/&#(\w+)(^\w|;)?/g,ln=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,mn=/^([^:]+):/gm,Tn=[".","/"];function pn(e){return Tn.indexOf(e[0])>-1}function hn(e){return e.replace(_n,function(n,t){return String.fromCharCode(t)})}function wn(e){var n=hn(e||"").replace(ln,"").trim();if(!n)return"about:blank";if(pn(n))return n;var t=n.match(mn);if(!t)return n;var r=t[0];return En.test(r)?"about:blank":n}se=ue.sanitizeUrl=wn;const fn=e=>e&&decodeURIComponent(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),x=e=>{const n=window.location.search.replace("?","");return fn(n.substr(n.indexOf(`${e}=`)).split("&")[0].split("=")[1])},Sn=()=>{if(!window.URLSearchParams)return A(()=>Promise.resolve().then(()=>On),void 0).then(t=>{const s=new t(window.location.search).get("return_to");return s?se(s):null});const n=new URLSearchParams(window.location.search).get("return_to");return n?se(n):null},ge=e=>e&&e.discount_percent>0,Lr=(e,n)=>{if(e.is_subscription)return x("plan")!==Le&&(x("code")||x("promocode")||x("plan")===Me||x("monthly")==="1")?n.monthly||n.yearly:n.yearly||n.monthly;if(x("code")){if(ge(n.purchase))return n.purchase;if(ge(n.rent))return n.rent}return x("rent")==="1"?n.rent||n.pwyw||n.purchase:n.pwyw||n.purchase||n.rent},J=(e,n)=>e.id&&j(n),j=e=>e.is_subscription&&e.is_free,Y=(e,n)=>`/checkout/${e.is_subscription?"subscribe":e.sku}/${n}${location.search}`,Q=e=>Y(e,"receipt"),gn=e=>Y(e,"processing"),B=e=>Y(e,"signup"),Nn=e=>Y(e,"login"),X=e=>Y(e,"purchase"),In=e=>Y(e,"gift"),yn=e=>e.discount_percent===100,Hr=e=>yn(e)&&Cn(e),Pn=e=>cn.includes(e.frequency),Cn=e=>an.includes(e.frequency),Gr=e=>dn.includes(e.frequency),Fr=e=>!!e.id,qr=(e,n)=>{const t=Number(e);return Math.round(t*(n?1:100))},$r=()=>window.innerWidth<=480,jr=(e,n=window)=>{const t=e.is_subscription?"subscribe":e.sku;return n.location.pathname.includes(`/checkout/${t}/gift`)},Yr=()=>{const e={Accept:"application/json",...I},n={method:"POST",headers:e},t=()=>`${Sn()||window.location.pathname+window.location.search}`;fetch("/logout",n).then(M).then(()=>{window.location.href=t()})},He=e=>{window._current_user.id=e.id,window._current_user.name=e.name,window._current_user.email=e.email},Wr=(e,n,t,r,s)=>{r(s);const i=s===ke?Nn(e):B(e);t({from:"payment"}),n.push(i)},Xr=e=>Ce().add(e,"days"),Br=e=>un.includes(e),zr=(e,n)=>Ce().add(e,n.slice(0,-2));var Ne={};(function(e){var n=function(){try{if(e.URLSearchParams&&new e.URLSearchParams("foo=bar").get("foo")==="bar")return e.URLSearchParams}catch{}return null}(),t=n&&new n({a:1}).toString()==="a=1",r=n&&new n("s=%2B").get("s")==="+",s="__URLSearchParams__",i=n?function(){var u=new n;return u.append("s"," &"),u.toString()==="s=+%26"}():!0,a=c.prototype,o=!!(e.Symbol&&e.Symbol.iterator);if(n&&t&&r&&i)return;function c(u){u=u||"",(u instanceof URLSearchParams||u instanceof c)&&(u=u.toString()),this[s]=C(u)}a.append=function(u,T){b(this[s],u,T)},a.delete=function(u){delete this[s][u]},a.get=function(u){var T=this[s];return this.has(u)?T[u][0]:null},a.getAll=function(u){var T=this[s];return this.has(u)?T[u].slice(0):[]},a.has=function(u){return L(this[s],u)},a.set=function(T,w){this[s][T]=[""+w]},a.toString=function(){var u=this[s],T=[],w,g,P,O;for(g in u)for(P=y(g),w=0,O=u[g];w<O.length;w++)T.push(P+"="+y(O[w]));return T.join("&")};var E=!r,m=!E&&n&&!t&&e.Proxy,h;m?(h=new Proxy(n,{construct:function(u,T){return new u(new c(T[0]).toString())}}),h.toString=Function.prototype.toString.bind(c)):h=c,Object.defineProperty(e,"URLSearchParams",{value:h});var p=e.URLSearchParams.prototype;p.polyfill=!0,p.forEach=p.forEach||function(u,T){var w=C(this.toString());Object.getOwnPropertyNames(w).forEach(function(g){w[g].forEach(function(P){u.call(T,P,g,this)},this)},this)},p.sort=p.sort||function(){var u=C(this.toString()),T=[],w,g,P;for(w in u)T.push(w);for(T.sort(),g=0;g<T.length;g++)this.delete(T[g]);for(g=0;g<T.length;g++){var O=T[g],k=u[O];for(P=0;P<k.length;P++)this.append(O,k[P])}},p.keys=p.keys||function(){var u=[];return this.forEach(function(T,w){u.push(w)}),U(u)},p.values=p.values||function(){var u=[];return this.forEach(function(T){u.push(T)}),U(u)},p.entries=p.entries||function(){var u=[];return this.forEach(function(T,w){u.push([w,T])}),U(u)},o&&(p[e.Symbol.iterator]=p[e.Symbol.iterator]||p.entries);function y(u){var T={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(u).replace(/[!'\(\)~]|%20|%00/g,function(w){return T[w]})}function V(u){return u.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/ig,function(T){return decodeURIComponent(T)})}function U(u){var T={next:function(){var w=u.shift();return{done:w===void 0,value:w}}};return o&&(T[e.Symbol.iterator]=function(){return T}),T}function C(u){var T={};if(typeof u=="object")if(W(u))for(var w=0;w<u.length;w++){var g=u[w];if(W(g)&&g.length===2)b(T,g[0],g[1]);else throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements")}else for(var P in u)u.hasOwnProperty(P)&&b(T,P,u[P]);else{u.indexOf("?")===0&&(u=u.slice(1));for(var O=u.split("&"),k=0;k<O.length;k++){var F=O[k],d=F.indexOf("=");-1<d?b(T,V(F.slice(0,d)),V(F.slice(d+1))):F&&b(T,V(F),"")}}return T}function b(u,T,w){var g=typeof w=="string"?w:w!=null&&typeof w.toString=="function"?w.toString():JSON.stringify(w);L(u,T)?u[T].push(g):u[T]=[g]}function W(u){return!!u&&Object.prototype.toString.call(u)==="[object Array]"}function L(u,T){return Object.prototype.hasOwnProperty.call(u,T)}})(typeof re<"u"?re:typeof window<"u"?window:re);const On=bt({__proto__:null,default:Ne},[Ne]),Ee="UPDATE_CUSTOMER",Z="SELECT_PURCHASE_OPTION",Ge="SET_PRODUCT",Fe="SET_PRICES",qe="ERROR_OCCURRED",$e="ERROR_RESET",je="ERROR_RESET_ALL",Ye="UPDATE_PROCESSING_PURCHASE",We="SET_REGISTRATION_TYPE",Xe="SET_SIGNUP_INFO",Be="SET_LOGIN_INFO",vn="SET_SIGNUP_INFO_VALIDITY",ze="SET_GIFT_PARAMS",Ke="SET_PURCHASE_TYPE_SELECTED",Je="CLEAR_FREE_TRIAL",bn="FETCH_PURCHASE_STATUS",Rn="CONFIRM_PAYMENT_INTENT",An="FETCH_TRANSACTION_GATEWAY_RESPONSE",Qe="purchase",Vn="tvod_gift",Dn=[Qe,Vn],Ze=e=>e===nn,G=e=>Ze(e)?en:Zt,Kr=e=>n=>{n({type:Ge,product:e})},Jr=e=>n=>{!e.transaction&&e.currency&&e.subtotal&&e.country_code&&!Ze(e.account_type)&&(e={...e,tax_formatted:"$0",tax:0},fetch("/checkout/taxes.json",{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({currency:e.currency,subtotal:e.subtotal-(e.discount_value||0),country_code:e.country_code,postal_code:e.postal_code,has_recorded_content:e.has_recorded_content,purchase_type:Dn.includes(e.frequency)?Qe:""})}).then(t=>t.json()).then(t=>{n({type:Z,option:{tax_formatted:t.tax_formatted,tax:t.tax,total_formatted:t.total_formatted,inclusive_taxes:t.inclusive_taxes}})},t=>n({type:Z,option:{error_message:"could not calculate taxes"}}))),n({type:Z,option:e})};function _e(e,n){var r,s,i,a,o,c,E,m,h,p,y,V,U,C,b;let t=((s=(r=e.token)==null?void 0:r.card)==null?void 0:s.country)||((a=(i=e.paymentMethod)==null?void 0:i.card)==null?void 0:a.country);if(n){const L=new URLSearchParams(window.location.search).get("country");L&&(t=L)}return{payment_method_id:(o=e.paymentMethod)==null?void 0:o.id,token:(c=e.token)==null?void 0:c.id,country_code:t,postal_code:((m=(E=e.token)==null?void 0:E.card)==null?void 0:m.address_zip)||((y=(p=(h=e.paymentMethod)==null?void 0:h.billing_details)==null?void 0:p.address)==null?void 0:y.postal_code),name:((U=(V=e.token)==null?void 0:V.card)==null?void 0:U.name)||((b=(C=e.paymentMethod)==null?void 0:C.billing_details)==null?void 0:b.name)}}const Qr=(e,n)=>{const t=G(n),r=Object.assign(I,{"Cache-Control":"no-cache, no-store"});return s=>(s({type:An}),fetch(`${t}/${e}/retrieve`,{method:"GET",headers:r,credentials:"include"}).then(M))},Zr=(e,n)=>{const t=G(n),r=Object.assign(I,{"Cache-Control":"no-cache, no-store"});return s=>(s({type:Rn}),fetch(`${t}/${e}/confirm`,{method:"PUT",headers:r,credentials:"include"}).then(M))},es=(e,n,t)=>{const r=Object.assign(I,{"Cache-Control":"no-cache, no-store"}),s=G(n),i=t?`${s}/${e}?verification_key=${t}`:`${s}/${e}`;return a=>(a({type:bn}),fetch(i,{method:"GET",headers:r,credentials:"include"}).then(M))},ts=e=>()=>fetch(G(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({product_sku:e.productSku,code:e.promoCode,is_rental:e.isRental,card:{name:"",country_code:""},captcha:e.captcha})}),ns=e=>()=>fetch(G(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({card:_e(e.stripeResponse,e.checkoutCountryOverride),product_sku:e.productSku,code:e.promoCode,is_rental:e.isRental,donation_price:e.donationPrice,campaign:e.campaign,captcha:e.captcha})}),rs=e=>n=>{n({type:Ye,isProcessing:e})},ss=e=>()=>fetch(G(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({card:_e(e.stripeResponse,e.checkoutCountryOverride),frequency:e.frequency,product_type:on,product_sku:e.productSku,code:e.promoCode,campaign:e.campaign,force_charge:e.forceCharge?"1":void 0,attribution:e.attributionFromUrl,captcha:e.captcha})}),os=e=>()=>fetch(G(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({user:{email:e.giftParams.senderEmail},product_sku:e.productSku,product_type:e.type,frequency:e.frequency,card:_e(e.stripeResponse,e.checkoutCountryOverride),is_rental:e.isRental,campaign:e.campaign,attribution:e.attributionFromUrl,gift:{emails:[e.giftParams.recipientEmail],message:e.giftParams.message,send_at:e.giftParams.sendAt,duration_months:e.durationMonths},captcha:e.captcha})}),is=e=>async n=>{var s;const t=await fetch("/registration.json",{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({email:e.email,name:e.name,password:e.password,marketing_opt_in:e.marketing_opt_in,send_email:e.send_email?1:0,product_sku:e.productSku,product_type:e.productType})}),r=await M(t);(s=r.metadata)!=null&&s.authenticity_token&&vt(r.metadata.authenticity_token),n({type:Ee,data:r}),He(r),window.Stats.trackEvent(window.Tracking.EVENTS.EVENT_AUTHENTICATION_IDENTIFY_USER)},Un=e=>{const n=e.user,t=typeof n.thumbnail=="object"?n.thumbnail.small:n.thumbnail;return{...n,thumbnail:t}},as=e=>async n=>{var i,a,o;const t=JSON.stringify({...e}),r=await fetch("/login.json",{method:"POST",headers:I,credentials:"same-origin",body:t}),s=Un(await M(r));n({type:Ee,data:s}),He(s),(o=window.Stats)==null||o.trackEvent((a=(i=window.Tracking)==null?void 0:i.EVENTS)==null?void 0:a.EVENT_AUTHENTICATION_SIGNIN_COMPLETE)},cs=({productId:e,checkoutCountryOverride:n=!1,countryCode:t="",postalCode:r="",promoCode:s="",donationPrice:i="",frequency:a=""})=>{if(n){const c=new URLSearchParams(window.location.search).get("country");c&&(t=c)}return async o=>{const c=await fetch(`/products/${e}/price_breakdowns?promo_code=${s}&country_code=${t}&postal_code=${r}&donation_price=${i}&frequency=${a}`,{method:"GET",headers:I,credentials:"include"}),E=await M(c);return await o({type:Fe,prices:E}),E}},ds=({from:e,id:n=null,message:t=null}={})=>r=>{r({type:qe,payload:{from:e,id:n,message:t}})},us=({from:e}={})=>n=>{n({type:$e,payload:{from:e}})},Es=()=>e=>{e({type:je})},kn=e=>n=>{n({type:We,registrationType:e})},_s=e=>async n=>{await n({type:Xe,signupInfo:e})},ls=e=>async n=>{await n({type:Be,loginInfo:e})},ms=e=>async n=>{await n({type:ze,giftParams:e})},Ts=e=>n=>{n({type:Ke,purchaseTypeSelected:e})},ps=()=>e=>{e({type:Je})},hs=e=>()=>fetch("/payment_method/update",{method:"PATCH",headers:I,credentials:"same-origin",body:JSON.stringify({id:e.id,postal_code:e.postalCode,user:e.user})}),xn={auth_formatted:null,auth_currency:"USD",country_code:null,discount_formatted:null,discount_percent:null,error_message:"",frequency:"yearly",gift_formatted:null,gift_label:null,giftParams:{message:"",recipientEmail:"",sendAt:null,senderEmail:"",valid:!1},inclusive_taxes:!1,is_zero_decimal:!1,postal_code:null,pwywPrice:"",renewal_date:"",subtotal_formatted:null,subtotal:0,symbol:"$",tax_formatted:null,tax:0,total_formatted:null,total:0,type:"subscription",zero_formatted:null},Mn=(e=xn,n)=>{switch(n.type){case Z:return Object.assign({},e,n.option);case ze:return{...e,giftParams:{...e.giftParams,...n.giftParams}};default:return e}},Ln={prices:{yearly:{},monthly:{},gift_prices:[]}},et=window.VHX.data.paidSubscription||{},Hn=Object.assign({},window.VHX.data.product,Ln),Gn=(e=et,n)=>e,Fn=(e=!ht(et),n)=>e,qn=(e=Hn,n)=>{switch(n.type){case Ge:return Object.assign({},e,n.product);case Fe:return{...e,prices:{...n.prices,gift_prices:n.prices.gift_prices}};case Je:return{...e,has_free_trial:!1,force_charge:!0};default:return e}},Ie={payment:null},$n=(e=Ie,n)=>{const{type:t,payload:{from:r,message:s,id:i}={}}=n;switch(t){case qe:return{...e,[r]:{message:s,id:i}};case $e:return{...e,[r]:null};case je:return{...Ie};default:return e}},jn=(e=!1,n)=>{switch(n.type){case Ye:return n.isProcessing;default:return e}},Yn=(e=!1,n)=>{switch(n.type){case Ke:return n.purchaseTypeSelected;default:return e}},Wn={registrationType:tn,signupInfo:{name:"",email:"",password:"",newsLetterAgree:!!window.VHX.data.marketingOptinDefault,valid:!1},loginInfo:{email:"",password:"",valid:!1}},Xn=(e=Wn,n)=>{switch(n.type){case We:return{...e,registrationType:n.registrationType};case Xe:return{...e,signupInfo:n.signupInfo};case vn:return{...e,signupInfo:{...e.signupInfo,valid:n.valid}};case Be:return{...e,loginInfo:n.loginInfo};default:return e}},Bn=ie({purchaseOption:Mn,product:qn,hasPaidSubscriptionProduct:Fn,paidSubscriptionProduct:Gn,error:$n,isProcessingPurchase:jn,purchaseTypeSelected:Yn,registrationInfo:Xn}),zn={customer:Object.assign({},window.VHX.data.customer),site:Object.assign({},window.VHX.data.site),hasPurchasedProduct:!!window.VHX.data.hasPurchasedProduct,preexistingProcessingTransaction:Object.assign({},window.VHX.data.preexistingProcessingTransaction),currentPurchaseType:"",adminPreview:window.VHX.data.adminPreview,featureFlags:{},checkoutCountryOverride:window.VHX.data.checkoutCountryOverride},Kn=(e=zn,n)=>{switch(n.type){case be:return Object.assign({},e,n.data);case Re:return Object.assign({},e,n.data);case Ee:return Object.assign({},e,{customer:n.data});case De:return Object.assign({},e,{featureFlags:n.featureFlags});case Ue:return Object.assign({},e,{apiV2Config:n.apiV2Config});case Ve:return{...e,hasPurchasedProduct:n.hasPurchasedProduct,preexistingProcessingTransaction:n.preexistingProcessingTransaction};case Ae:return{...e,currentPurchaseType:n.currentPurchaseType};default:return e}},Jn=ie({current:Kn}),Qn={found:ot,global:Jn,checkout:Bn},Zn=[{path:":sku?",getComponent:()=>A(()=>import("../ProductContainer.e32ac7f4.js").then(e=>e.P),["ProductContainer.e32ac7f4.js","styled-components.browser.esm.f92a9794.js","index.71ea8908.js","index.be5f128d.js","inheritsLoose.a8857277.js","config.dcd057e4.js","deviceSizes.c239999b.js","preload-helper.070d40e7.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","loadable.esm.2f608a47.js","index.7daa47bc.js","setup-react-intl.5037b415.js","chevron-down-white.92e093fa.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","Icon.3e8ae0ab.js","index.0e8c968f.js","assets/Icon.74bb0692.css","message.6b98dd87.js"]).then(e=>e.default),getData:({params:e})=>({sku:e.sku}),children:[{path:"signup",getComponent:()=>A(()=>import("../RightPanel.1f8f3197.js"),["RightPanel.1f8f3197.js","styled-components.browser.esm.f92a9794.js","index.71ea8908.js","index.be5f128d.js","inheritsLoose.a8857277.js","config.dcd057e4.js","deviceSizes.c239999b.js","style.2c79b1a2.js","assets/style.5a26ef87.css","index.3e7fca18.js","moment.5b964101.js","index.7daa47bc.js","setup-react-intl.5037b415.js","AnimatedInput.0eac93af.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","isEmpty.9130974e.js","equals.d9a066f9.js","_isArray.68eb59b2.js","_isString.019dcf3c.js","text-helpers.5faad95e.js","message.6b98dd87.js","Avatar.15feb249.js","PrimaryButton.9e3ee481.js","color-helpers.f6b49b72.js","index.8da42104.js","Title.c7d1e3bc.js","productConstants.d54b4efb.js","DismissX.esm.514d8c9f.js","index.esm.f84f874f.js","CircleInfo.esm.aa0100c4.js","CircleWarning.esm.82d83784.js","Checkmark.esm.b6505a95.js","fetch.74022fd8.js","stripe-helpers.333761cf.js","SvodTOS.94669d3a.js","includes.777093e1.js","_includes.3534e71e.js","Checkbox.01728461.js","intl.helpers.63b1d091.js","GiftingDisclaimer.2a8bfb32.js","isNil.3d926206.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","Text.esm.c8582203.js","Button.esm.b19035d8.js","preload-helper.070d40e7.js","insights.063615ae.js","index.cae3477b.js","Redirect.57430a6e.js"]).then(e=>e.default),getData:({context:e})=>{const{customer:n,hasPurchasedProduct:t}=e.store.getState().global.current,r=e.store.getState().checkout.product;if(J(n,r)||t)throw new R(Q(r));if(!j(r))throw new R(X(r))}},{path:"login",getComponent:()=>A(()=>import("../RightPanel.1f8f3197.js"),["RightPanel.1f8f3197.js","styled-components.browser.esm.f92a9794.js","index.71ea8908.js","index.be5f128d.js","inheritsLoose.a8857277.js","config.dcd057e4.js","deviceSizes.c239999b.js","style.2c79b1a2.js","assets/style.5a26ef87.css","index.3e7fca18.js","moment.5b964101.js","index.7daa47bc.js","setup-react-intl.5037b415.js","AnimatedInput.0eac93af.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","isEmpty.9130974e.js","equals.d9a066f9.js","_isArray.68eb59b2.js","_isString.019dcf3c.js","text-helpers.5faad95e.js","message.6b98dd87.js","Avatar.15feb249.js","PrimaryButton.9e3ee481.js","color-helpers.f6b49b72.js","index.8da42104.js","Title.c7d1e3bc.js","productConstants.d54b4efb.js","DismissX.esm.514d8c9f.js","index.esm.f84f874f.js","CircleInfo.esm.aa0100c4.js","CircleWarning.esm.82d83784.js","Checkmark.esm.b6505a95.js","fetch.74022fd8.js","stripe-helpers.333761cf.js","SvodTOS.94669d3a.js","includes.777093e1.js","_includes.3534e71e.js","Checkbox.01728461.js","intl.helpers.63b1d091.js","GiftingDisclaimer.2a8bfb32.js","isNil.3d926206.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","Text.esm.c8582203.js","Button.esm.b19035d8.js","preload-helper.070d40e7.js","insights.063615ae.js","index.cae3477b.js","Redirect.57430a6e.js"]).then(e=>e.default),getData:({context:e})=>{const{customer:n,hasPurchasedProduct:t}=e.store.getState().global.current,r=e.store.getState().checkout.product;if(J(n,r)||t)throw new R(Q(r));if(e.store.dispatch(kn(ke)),!j(r))throw new R(X(r))}},{path:"receipt",getComponent:()=>A(()=>import("../Receipt.c6072233.js"),["Receipt.c6072233.js","preload-helper.070d40e7.js","styled-components.browser.esm.f92a9794.js","index.be5f128d.js","index.71ea8908.js","inheritsLoose.a8857277.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","config.dcd057e4.js","loadable.esm.2f608a47.js","index.7daa47bc.js","setup-react-intl.5037b415.js","PrimaryButton.9e3ee481.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","color-helpers.f6b49b72.js","Title.c7d1e3bc.js","deviceSizes.c239999b.js","message.6b98dd87.js","isNil.3d926206.js","index.8da42104.js","insights.063615ae.js","index.cae3477b.js","fetch.74022fd8.js","moment.5b964101.js","Redirect.57430a6e.js"]).then(e=>e.default),getData:({context:e})=>{const{customer:n,hasPurchasedProduct:t,currentPurchaseType:r}=e.store.getState().global.current,{product:s,purchaseOption:i}=e.store.getState().checkout;if(!Pn(i)&&!J(n,s)&&!t&&!r)throw new R(j(s)?B(s):X(s))}},{path:"processing",getComponent:()=>A(()=>import("../ProcessingTransaction.c380df8a.js"),["ProcessingTransaction.c380df8a.js","styled-components.browser.esm.f92a9794.js","index.71ea8908.js","index.be5f128d.js","inheritsLoose.a8857277.js","config.dcd057e4.js","index.7daa47bc.js","setup-react-intl.5037b415.js","PrimaryButton.9e3ee481.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","color-helpers.f6b49b72.js","Title.c7d1e3bc.js","message.6b98dd87.js","preload-helper.070d40e7.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","isNil.3d926206.js","index.8da42104.js","insights.063615ae.js","index.cae3477b.js","fetch.74022fd8.js","moment.5b964101.js","Redirect.57430a6e.js"]).then(e=>e.default),getData:({context:e})=>{const{customer:n,preexistingProcessingTransaction:t}=e.store.getState().global.current,{product:r}=e.store.getState().checkout;if(!n.id)throw new R(B(r));if(!t.id)throw new R(X(r))}},{path:"purchase",getComponent:()=>A(()=>import("../RightPanel.1f8f3197.js"),["RightPanel.1f8f3197.js","styled-components.browser.esm.f92a9794.js","index.71ea8908.js","index.be5f128d.js","inheritsLoose.a8857277.js","config.dcd057e4.js","deviceSizes.c239999b.js","style.2c79b1a2.js","assets/style.5a26ef87.css","index.3e7fca18.js","moment.5b964101.js","index.7daa47bc.js","setup-react-intl.5037b415.js","AnimatedInput.0eac93af.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","isEmpty.9130974e.js","equals.d9a066f9.js","_isArray.68eb59b2.js","_isString.019dcf3c.js","text-helpers.5faad95e.js","message.6b98dd87.js","Avatar.15feb249.js","PrimaryButton.9e3ee481.js","color-helpers.f6b49b72.js","index.8da42104.js","Title.c7d1e3bc.js","productConstants.d54b4efb.js","DismissX.esm.514d8c9f.js","index.esm.f84f874f.js","CircleInfo.esm.aa0100c4.js","CircleWarning.esm.82d83784.js","Checkmark.esm.b6505a95.js","fetch.74022fd8.js","stripe-helpers.333761cf.js","SvodTOS.94669d3a.js","includes.777093e1.js","_includes.3534e71e.js","Checkbox.01728461.js","intl.helpers.63b1d091.js","GiftingDisclaimer.2a8bfb32.js","isNil.3d926206.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","Text.esm.c8582203.js","Button.esm.b19035d8.js","preload-helper.070d40e7.js","insights.063615ae.js","index.cae3477b.js","Redirect.57430a6e.js"]).then(e=>e.default),getData:({context:e})=>{const{customer:n,hasPurchasedProduct:t,currentPurchaseType:r,preexistingProcessingTransaction:s}=e.store.getState().global.current,i=e.store.getState().checkout.product;if(J(n,i)||t||r)throw new R(Q(i));if(j(i))throw new R(B(i));if(s.id)throw new R(gn(i))}},{path:"gift",getComponent:()=>A(()=>import("../RightPanel.1f8f3197.js"),["RightPanel.1f8f3197.js","styled-components.browser.esm.f92a9794.js","index.71ea8908.js","index.be5f128d.js","inheritsLoose.a8857277.js","config.dcd057e4.js","deviceSizes.c239999b.js","style.2c79b1a2.js","assets/style.5a26ef87.css","index.3e7fca18.js","moment.5b964101.js","index.7daa47bc.js","setup-react-intl.5037b415.js","AnimatedInput.0eac93af.js","Button.f76526f0.js","colors.esm.e8046dae.js","Spinner.69e74d66.js","_curry2.3e499763.js","isEmpty.9130974e.js","equals.d9a066f9.js","_isArray.68eb59b2.js","_isString.019dcf3c.js","text-helpers.5faad95e.js","message.6b98dd87.js","Avatar.15feb249.js","PrimaryButton.9e3ee481.js","color-helpers.f6b49b72.js","index.8da42104.js","Title.c7d1e3bc.js","productConstants.d54b4efb.js","DismissX.esm.514d8c9f.js","index.esm.f84f874f.js","CircleInfo.esm.aa0100c4.js","CircleWarning.esm.82d83784.js","Checkmark.esm.b6505a95.js","fetch.74022fd8.js","stripe-helpers.333761cf.js","SvodTOS.94669d3a.js","includes.777093e1.js","_includes.3534e71e.js","Checkbox.01728461.js","intl.helpers.63b1d091.js","GiftingDisclaimer.2a8bfb32.js","isNil.3d926206.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","Text.esm.c8582203.js","Button.esm.b19035d8.js","preload-helper.070d40e7.js","insights.063615ae.js","index.cae3477b.js","Redirect.57430a6e.js"]).then(e=>e.default),getData:({params:e})=>({sku:e.sku})}]}],ye=({context:e})=>{const{site:n,hasPurchasedProduct:t}=e.store.getState().global.current,r=e.store.getState().checkout.product;return x("gift")==="1"?In(r):t?(Ct({category:"User",action:"load_receipt_page"}),Q(r)):j(n)?B(r):X(r)},er=[new we({from:"checkout",to:ye}),new we({from:"checkout/:sku",to:ye}),{path:"checkout",getComponent:()=>A(()=>import("../Checkout.17d41c73.js"),["Checkout.17d41c73.js","styled-components.browser.esm.f92a9794.js","index.esm.f84f874f.js","colors.esm.e8046dae.js","inheritsLoose.a8857277.js","index.71ea8908.js","index.be5f128d.js","LanguageSwitcher.347231b5.js","index.fedb99bc.js","index.61149844.js","index.9dc763b0.js","setup-react-intl.5037b415.js","index.7daa47bc.js","deviceSizes.c239999b.js","message.6b98dd87.js","Spinner.69e74d66.js","config.dcd057e4.js","CheckoutHeader.c138a69a.js","routeConstants.75a79ec9.js","CircleInfo.esm.aa0100c4.js","react-onclickoutside.es.afeacd36.js","Avatar.15feb249.js","text-helpers.5faad95e.js","_isArray.68eb59b2.js","_curry2.3e499763.js","Title.c7d1e3bc.js","isEmpty.9130974e.js","equals.d9a066f9.js","_isString.019dcf3c.js","preload-helper.070d40e7.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","isNil.3d926206.js","index.8da42104.js","insights.063615ae.js","index.cae3477b.js","fetch.74022fd8.js","moment.5b964101.js","Redirect.57430a6e.js"]).then(e=>e.default),children:Zn},{path:"plans",getComponent:()=>A(()=>import("../Plans.7175af55.js"),["Plans.7175af55.js","styled-components.browser.esm.f92a9794.js","index.esm.f84f874f.js","colors.esm.e8046dae.js","inheritsLoose.a8857277.js","index.be5f128d.js","index.71ea8908.js","CheckoutHeader.c138a69a.js","routeConstants.75a79ec9.js","config.dcd057e4.js","CircleInfo.esm.aa0100c4.js","index.7daa47bc.js","setup-react-intl.5037b415.js","react-onclickoutside.es.afeacd36.js","Avatar.15feb249.js","text-helpers.5faad95e.js","_isArray.68eb59b2.js","_curry2.3e499763.js","Title.c7d1e3bc.js","message.6b98dd87.js","deviceSizes.c239999b.js","isEmpty.9130974e.js","equals.d9a066f9.js","_isString.019dcf3c.js","intl.helpers.63b1d091.js","Button.esm.b19035d8.js","Text.esm.c8582203.js","LanguageSwitcher.c172b748.js","index.fedb99bc.js","index.61149844.js","index.9dc763b0.js","Select.esm.abcc3788.js","PopOver.minors.esm.2e0ab0d9.js","Header.esm.b9f62650.js","Checkmark.esm.b6505a95.js","Wrapper.esm.2d7c3680.js","Paragraph.esm.687ca175.js","ChevronDown.esm.59c49af2.js","PopOver.esm.8ec669e4.js","assets/LanguageSwitcher.29a142b9.css","preload-helper.070d40e7.js","_baseIsEqual.f6bdc817.js","_MapCache.73dd8342.js","isObject.c70885d8.js","isNil.3d926206.js","index.8da42104.js","insights.063615ae.js","index.cae3477b.js","fetch.74022fd8.js","moment.5b964101.js","Redirect.57430a6e.js","assets/Plans.75829344.css"]).then(e=>e.default),getData:({location:e})=>({videoId:e.query.video_id})}],tr={api:{token:window.VHX.config.token},urls:{root:window.VHX.config.root_url,api_v1:window.VHX.config.api_url}};class le extends st.exports.Component{componentDidMount(){Ot()}render(){return H.createElement(ft,{locale:he(),messages:Pt(he()),textComponent:"span"},H.createElement(pt,null),this.props.children)}}const nr=[{path:"/",Component:le,getData:async({context:e})=>{await e.store.dispatch(Jt()),await e.store.dispatch(Qt()),(pe(e.store.getState().global.current.site)||pe(e.store.getState().global.current.customer))&&await e.store.dispatch(Kt())},children:er}],rr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||It,oe=St(ie(Qn),rr(it({protocol:new at,middlewares:[ct]}),dt(new ut(nr)),gt(Et.withExtraArgument(tr))));oe.dispatch(_t.init());const tt=({error:e})=>H.createElement("div",null,e);tt.propTypes={error:Pe.exports.string};const sr=lt({render:mt({renderError:tt})});le.propTypes={children:Pe.exports.node};le.defaultProps={children:H.createElement("div",null)};const or=()=>{let e={apiKey:window.STRIPE_PUBLIC_KEY,apiVersion:window.STRIPE_API_VERSION};return window.STRIPE_ACCOUNT_ID&&(e={...e,stripeAccount:window.STRIPE_ACCOUNT_ID}),e};rt.render(H.createElement(Nt,{store:oe},H.createElement(yt,{...or()},H.createElement(sr,{resolver:Tt,matchContext:{store:oe}}))),document.getElementById("customer-app"));export{Zr as $,Wr as A,Br as B,Mr as C,Pn as D,Gr as E,ae as F,xe as G,Vr as H,Ar as I,Rr as J,Dr as K,ke as L,Cr as M,Hr as N,rn as O,de as P,ss as Q,ce as R,tn as S,Se as T,Qr as U,Ur as V,os as W,ts as X,sn as Y,ns as Z,es as _,jr as a,yr as a0,rs as a1,Es as a2,is as a3,ps as a4,hs as a5,xr as a6,br as a7,Fr as a8,_s as a9,Kr as aa,an as ab,Xr as ac,zr as ad,kr as ae,Sn as af,In as ag,on as ah,vr as ai,kn as b,X as c,Lr as d,Nn as e,cs as f,x as g,Yr as h,j as i,B as j,Ts as k,ds as l,us as m,$r as n,qr as o,ms as p,Pr as q,as as r,Jr as s,ls as t,Or as u,yn as v,Cn as w,Me as x,Le as y,Q as z};
//# sourceMappingURL=customer.1b6f5ae9.js.map
